(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/orderDetails/orderDetails"],{"0a0a":function(e,t,a){},"226b":function(e,t,a){"use strict";(function(e){a("f1a0"),a("921b");o(a("66fd"));var t=o(a("5514"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},5514:function(e,t,a){"use strict";a.r(t);var o=a("f016"),d=a("926c");for(var s in d)"default"!==s&&function(e){a.d(t,e,function(){return d[e]})}(s);a("86ad");var n,r=a("f0c5"),i=Object(r["a"])(d["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],n);t["default"]=i.exports},6588:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=void 0,o={data:function(){return{orderVoList:[{skuStock:2,skuName:"黑色",skuQty:1,marketPrice:"99",retailPrice:"88",skuImg:"https://p5.ssl.qhimgs1.com/bdr/326__/t01e7473d55942066af.png"}],money:"",address:"",chooseId:"",parendNo:"",supId:"",time:{m:"",s:""},timers:"",orderStatus:"1"}},components:{},props:{},onLoad:function(t){this.parendNo=t.parendNo,e.request({url:getApp().globalData.url3+getApp().globalData.getOrderListByParendNo+this.parendNo,data:"",header:{aid:120},method:"GET",dataType:"json",responseType:"text",success:function(t){if(t.data.data.orderVoList.length>0){for(var a=0,o=0;o<t.data.data.orderVoList.length;o++){var d=getApp().globalData.imgUrl+"/"+t.data.data.orderVoList[o].skuImg;t.data.data.orderVoList[o].skuImg=d,t.data.data.orderVoList[o].marketPrice=t.data.data.orderVoList[o].marketPrice.toFixed(2),a+=t.data.data.orderVoList[o].marketPrice*t.data.data.orderVoList[o].skuQty}a=a.toFixed(2),this.orderVoList=t.data.data.orderVoList,this.money=money,this.orderStatus=t.data.data.orderVoList[0].orderStatus,this.supId=t.data.data.orderVoList[0].supId,e.hideLoading(),this.timer()}},fail:function(e){},complete:function(e){}})},onReady:function(){e.request({url:getApp().globalData.url1+getApp().globalData.getDefaultAddress+getApp().globalData.memId,data:"",header:{aid:109},method:"GET",dataType:"json",responseType:"text",success:function(e){e.data.data.id&&(this.address=e.data.data,this.chooseId=e.data.data.id)},fail:function(e){},complete:function(e){}})},onShow:function(){e.hideShareMenu(),this.pageLoading=!1,this.chooseId&&e.request({url:getApp().globalData.url1+getApp().globalData.getAddressByMemberId+this.chooseId,data:"",header:{aid:110},method:"GET",dataType:"json",responseType:"text",success:function(e){this.address=e.data.data.memberAddrVo},fail:function(e){},complete:function(e){}})},onHide:function(){},onUnload:function(){clearInterval(this.timers),1==this.orderStatus&&wx.request({url:getApp().globalData.url3+getApp().globalData.supplementOrderMoney,data:{totalPayAmout:this.money,parendNo:this.parendNo,openId:getApp().globalData.openId,consignee:this.address.consignee,phone:this.address.phone,province:this.address.province,city:this.address.city,area:this.address.area,address:this.address.address,addressId:this.chooseId,wxMemId:getApp().globalData.memId},header:{aid:124},method:"put",dataType:"json",responseType:"text",success:function(e){},fail:function(e){},complete:function(e){}})},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{timer:function(){var t=9e5;a.timers=setInterval(function(){var o=parseInt(t/1e3/60%60,10),d=parseInt(t/1e3%60,10);a.time={m:a.checkTime(o),s:a.checkTime(d)},t-=1e3,t<0&&1==a.orderStatus&&e.request({url:getApp().globalData.url3+getApp().globalData.orderClosureByParendNo,data:{totalPayAmout:a.money,parendNo:a.parendNo,openId:getApp().globalData.openId,consignee:a.address.consignee,phone:a.address.phone,province:a.address.province,city:a.address.city,area:a.address.area,address:a.address.address,wxMemId:getApp().globalData.memId},header:{aid:123},method:"put",dataType:"json",responseType:"text",success:function(t){200==t.data.data.errorCode&&e.showToast({title:"订单已取消",mask:!0,success:function(e){a.orderStatus=7,clearInterval(a.timers)},fail:function(e){},complete:function(e){}})},fail:function(e){},complete:function(e){}})},1e3)},checkTime:function(e){return e<10&&(e="0"+e),e},addressFun:function(){this.pageLoading||(this.pageLoading=!0,e.navigateTo({url:"/pages/addressManagement/addressManagement?id="+this.chooseId+"&where=1"}))},commodity_details:function(t){var a=this;e.request({url:getApp().globalData.url2+getApp().globalData.getGoodsStatusById+t.currentTarget.dataset.goodsid,data:"",header:{aid:130},method:"GET",dataType:"json",responseType:"text",success:function(o){4==o.data.data.goodsVo.goodsStatus?e.showToast({title:"该商品已下架",mask:!0}):a.pageLoading||(a.pageLoading=!0,e.navigateTo({url:"/pages/commodity_details/commodity_details?goodsId="+t.currentTarget.dataset.goodsid}))},fail:function(e){},complete:function(e){}})},remind:function(){e.showToast({title:"已提醒发货",mask:!0,success:function(e){},fail:function(e){},complete:function(e){}})},cancelOrder:function(){var t=this;e.showModal({title:"提示",content:"确定取消订单",success:function(a){a.confirm?e.request({url:getApp().globalData.url3+getApp().globalData.orderClosureByParendNo,data:{totalPayAmout:t.money,parendNo:t.parendNo,openId:getApp().globalData.openId,consignee:t.address.consignee,phone:t.address.phone,province:t.address.province,city:t.address.city,area:t.address.area,address:t.address.address,addressId:t.chooseId,wxMemId:getApp().globalData.memId},header:{aid:123},method:"put",dataType:"json",responseType:"text",success:function(a){200==a.data.data.errorCode&&e.showToast({title:"订单已取消",mask:!0,success:function(e){t.orderStatus=7,clearInterval(t.timers)},fail:function(e){},complete:function(e){}})},fail:function(e){},complete:function(e){}}):a.cancel}})},ToOrder:function(){var t=this;this.address.phone?e.request({url:getApp().globalData.url3+getApp().globalData.createUnifiedOrder,data:{totalPayAmout:t.money,parendNo:t.parendNo,openId:getApp().globalData.openId,consignee:t.address.consignee,phone:t.address.phone,province:t.address.province,city:t.address.city,area:t.address.area,address:t.address.address,addressId:t.chooseId,wxMemId:getApp().globalData.memId},header:{aid:121},method:"post",dataType:"json",responseType:"text",success:function(a){a.data.data.prepayId?e.request({url:getApp().globalData.url3+getApp().globalData.generateSignature,data:{prepayId:a.data.data.prepayId},header:{aid:122},method:"post",dataType:"json",responseType:"text",success:function(a){a.data.data.sign&&e.requestPayment({timeStamp:a.data.data.timeStamp,nonceStr:a.data.data.nonceStr,package:a.data.data.package,signType:"MD5",paySign:a.data.data.sign,success:function(a){clearInterval(t.timers),t.orderStatus=2,e.showToast({title:"支付成功",mask:!0})},fail:function(e){},complete:function(e){}})}}):e.showModal({title:"提示",content:"订单异常，请重新下单"})}}):this.address.phone||e.showModal({title:"提示",content:"请完善收货信息"})},deletOrder:function(){var t=this;e.showModal({title:"提示",content:"确定删除订单",success:function(a){a.confirm?7==t.orderStatus?wx.request({url:getApp().globalData.url3+getApp().globalData.deleteOrderByCondition,data:{parendNo:t.parendNo,supId:t.supId,category:0},header:{aid:127},method:"delete",dataType:"json",responseType:"text",success:function(t){e.navigateBack({delta:1})},fail:function(e){},complete:function(e){}}):e.request({url:getApp().globalData.url3+getApp().globalData.deleteOrderByCondition,data:{parendNo:t.parendNo,supId:t.supId,category:1},header:{aid:127},method:"delete",dataType:"json",responseType:"text",success:function(t){e.navigateBack({delta:1})},fail:function(e){},complete:function(e){}}):a.cancel}})},logistics:function(){this.pageLoading||(this.pageLoading=!0,e.navigateTo({url:"/pages/orderTracking/orderTracking?logisticsCode="+this.address.logisticsCode+"&logisticsPostid="+this.address.logisticsPostid}))},sureOrder:function(){var t=this;e.showModal({title:"提示",content:"是否确认收货",success:function(a){a.confirm&&e.request({url:getApp().globalData.url3+getApp().globalData.confirmReceive,data:{parendNo:t.parendNo,supId:t.supId,openId:getApp().globalData.openId,wxMemId:getApp().globalData.memId},header:{aid:128},method:"put",dataType:"json",responseType:"text",success:function(e){t.orderStatus=5},fail:function(e){},complete:function(e){}})}})}}};t.default=o}).call(this,a("543d")["default"])},"86ad":function(e,t,a){"use strict";var o=a("0a0a"),d=a.n(o);d.a},"926c":function(e,t,a){"use strict";a.r(t);var o=a("6588"),d=a.n(o);for(var s in o)"default"!==s&&function(e){a.d(t,e,function(){return o[e]})}(s);t["default"]=d.a},f016:function(e,t,a){"use strict";var o,d=function(){var e=this,t=e.$createElement;e._self._c},s=[];a.d(t,"b",function(){return d}),a.d(t,"c",function(){return s}),a.d(t,"a",function(){return o})}},[["226b","common/runtime","common/vendor"]]]);