(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/commodity_details/commodity_details"],{"1bc2":function(o,t,e){"use strict";var n=e("cb2c"),i=e.n(n);i.a},"267b":function(o,t,e){"use strict";var n,i=function(){var o=this,t=o.$createElement;o._self._c},s=[];e.d(t,"b",function(){return i}),e.d(t,"c",function(){return s}),e.d(t,"a",function(){return n})},"30e1":function(o,t,e){"use strict";(function(o){e("f1a0"),e("921b");n(e("66fd"));var t=n(e("ffc1"));function n(o){return o&&o.__esModule?o:{default:o}}o(t.default)}).call(this,e("543d")["createPage"])},a931:function(o,t,e){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=e("65b3"),i=e("2f62");function s(o){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},n=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),n.forEach(function(t){a(o,t,e[t])})}return o}function a(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}var u={data:function(){return{hidden:!1,current:"",choose:"",chooseIndex:1,chooseSku:"",list:[],detailImgList:[],all:"",goodsSkuVoList:[],shoppingCartNum:"",totalPrice:""}},components:{},props:{},onLoad:function(t){var e=this;getApp().globalData.login(),o.showLoading({title:"加载中...",mask:!0}),(0,n.uniHttp)({path:"/goods/api/goodsInternal/getGoodsDetailsById/"+t.goodsId,header:{aid:"106",type:"1"}}).then(function(t){for(var n=t,i=0;i<n.goodsVo.carouselImgList.length;i++){var s=getApp().globalData.imgUrl+"/"+n.goodsVo.carouselImgList[i];n.goodsVo.carouselImgList[i]=s}for(i=0;i<n.goodsVo.goodsSkuVoList.length;i++){s=getApp().globalData.imgUrl+"/"+n.goodsVo.goodsSkuVoList[i].mainImg;var a=1;n.goodsVo.goodsSkuVoList[i].skuQty=a,n.goodsVo.goodsSkuVoList[i].mainImg=s}for(i=0;i<n.goodsVo.detailImgList.length;i++){s=getApp().globalData.imgUrl+"/"+n.goodsVo.detailImgList[i];n.goodsVo.detailImgList[i]=s}for(var u in n.goodsVo.goodsSkuVoList)e.goodsSkuVoList.push(n.goodsVo.goodsSkuVoList[u]);e.list=n.goodsVo.carouselImgList,e.all=n.goodsVo,e.detailImgList=n.goodsVo.detailImgList,e.chooseSku=e.goodsSkuVoList[0],o.hideLoading()})},onReady:function(){},onShow:function(){var o=this;console.log(this.userInfo,this.loginStatus),this.pageLoading=!1,this.userInfo&&(0,n.uniHttp)({path:"/member/api/memberInternal/getShoppingCartCount/"+this.$store.getters["login/get_userInfo"].id,header:{aid:"107"}}).then(function(t){o.shoppingCartNum=t.shoppingCartNum})},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},computed:s({},(0,i.mapGetters)("login",{loginStatus:"get_isLogin",userInfo:"get_userInfo"})),methods:{swiperChange:function(o){this.current=o.detail.current},preventD:function(){},previewImage1:function(t){o.previewImage({current:this.list[t],urls:this.list})},previewImage2:function(t){var e=t,n=[];n.push(e),o.previewImage({current:e,urls:n})},shoppingCart:function(){this.loginStatus?this.pageLoading||(this.pageLoading=!0,o.navigateTo({url:"/pages/shoppingCart/shoppingCart"})):this.islogined()},buyChoose:function(){this.userInfo?this.choose="buy":this.islogined()},orderDetails:function(t){var e=this,i=[{}];i[0].goodsId=this.all.id,i[0].skuId=this.chooseSku.id,i[0].skuQty=this.chooseSku.skuQty,o.showLoading({title:"加载中...",mask:!0}),(0,n.uniHttp)({path:"/orders/api/orderInternal/generatingOrder",method:"POST",data:{wxMemId:this.$store.getters["login/get_userInfo"].id,openId:getApp().globalData.openId,orderSource:getApp().globalData.userType,orderVoList:i},header:{aid:119}}).then(function(t){e.pageLoading||(e.pageLoading=!0,o.hideLoading(),o.navigateTo({url:"/pages/orderDetails/orderDetails?parendNo="+t.parendNo}),e.choose="")})},shoppingCartChoose:function(){this.userInfo?this.choose="shoppingCart":this.islogined()},joinShoppingCart:function(){var o=this;(0,n.uniHttp)({path:getApp().globalData.addAShoppingCart,method:"POST",data:{memId:this.$store.getters["login/get_userInfo"].id,memSource:1,skuId:this.chooseSku.id,qty:this.chooseSku.skuQty},header:{aid:"114"}}).then(function(t){console.log(t),(0,n.uniHttp)({path:getApp().globalData.getShoppingCartCount+o.$store.getters["login/get_userInfo"].id,data:{},header:{aid:"107"}}).then(function(t){o.shoppingCartNum=t.shoppingCartNum})}),this.choose=""},close:function(){this.choose=""},chooseType:function(o){this.chooseIndex=o,this.chooseSku=this.goodsSkuVoList[o]},reduce:function(){var o={};this.chooseSku.skuQty>=2&&(o.skuQty=this.chooseSku.skuQty-1,this.chooseSku.skuQty=o.skuQty)},add:function(){var o={};this.chooseSku.skuQty<this.chooseSku.skuStock&&(o.skuQty=this.chooseSku.skuQty+1,this.chooseSku.skuQty=o.skuQty)},islogined:function(){this.loginStatus||o.showModal({title:"提示",content:"请先登录哦!",success:function(t){t.confirm&&o.navigateTo({url:"/pages/login/login"})}})}}};t.default=u}).call(this,e("543d")["default"])},cb2c:function(o,t,e){},fa1e:function(o,t,e){"use strict";e.r(t);var n=e("a931"),i=e.n(n);for(var s in n)"default"!==s&&function(o){e.d(t,o,function(){return n[o]})}(s);t["default"]=i.a},ffc1:function(o,t,e){"use strict";e.r(t);var n=e("267b"),i=e("fa1e");for(var s in i)"default"!==s&&function(o){e.d(t,o,function(){return i[o]})}(s);e("1bc2");var a,u=e("f0c5"),r=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);t["default"]=r.exports}},[["30e1","common/runtime","common/vendor"]]]);