(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/orderDetailByOrders/orderDetailByOrders"],{"0e64":function(e,t,a){"use strict";a.r(t);var o=a("a179"),d=a("4ef0");for(var r in d)"default"!==r&&function(e){a.d(t,e,function(){return d[e]})}(r);a("f1d1");var s,n=a("f0c5"),i=Object(n["a"])(d["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=i.exports},"36d8":function(e,t,a){},3783:function(e,t,a){"use strict";(function(e){a("f1a0"),a("921b");o(a("66fd"));var t=o(a("0e64"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},"4ef0":function(e,t,a){"use strict";a.r(t);var o=a("d9a9"),d=a.n(o);for(var r in o)"default"!==r&&function(e){a.d(t,e,function(){return o[e]})}(r);t["default"]=d.a},a179:function(e,t,a){"use strict";var o,d=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.orderStatus})},r=[];a.d(t,"b",function(){return d}),a.d(t,"c",function(){return r}),a.d(t,"a",function(){return o})},d9a9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{hidden:!1,orderVoList:"",money:"",address:"",chooseId:"",parendNo:"",supId:"",time:{m:"",s:""},timers:"",orderStatus:""}},components:{},props:{},onLoad:function(e){var t=this;this.setData({parendNo:e.parendNo,supId:e.supId,orderStatus:e.orderStatus}),7==this.orderStatus||1==this.orderStatus?wx.request({url:getApp().globalData.url3+getApp().globalData.getOrderDetailByCondition,data:{parendNo:t.parendNo,supId:t.supId,category:0},header:{aid:126},method:"post",dataType:"json",responseType:"text",success:function(e){if(e.data.data.orderTYVo.orderVoList.length>0){for(var a=0;a<e.data.data.orderTYVo.orderVoList.length;a++){var o=getApp().globalData.imgUrl+"/"+e.data.data.orderTYVo.orderVoList[a].skuImg;e.data.data.orderTYVo.orderVoList[a].skuImg=o,e.data.data.orderTYVo.orderVoList[a].marketPrice=e.data.data.orderTYVo.orderVoList[a].marketPrice.toFixed(2)}e.data.data.orderTYVo.orderVoList[0].totalAmount=e.data.data.orderTYVo.orderVoList[0].totalAmount.toFixed(2),t.setData({orderVoList:e.data.data.orderTYVo.orderVoList,address:e.data.data.orderTYVo.orderDetailVo,money:e.data.data.orderTYVo.orderVoList[0].totalAmount,hidden:!0}),e.data.data.orderTYVo.orderDetailVo.addressId&&t.setData({chooseId:e.data.data.orderTYVo.orderDetailVo.addressId}),t.timer()}},fail:function(e){},complete:function(e){}}):wx.request({url:getApp().globalData.url3+getApp().globalData.getOrderDetailByCondition,data:{parendNo:t.parendNo,supId:t.supId,category:1},header:{aid:126},method:"post",dataType:"json",responseType:"text",success:function(e){if(e.data.data.orderTYVo.orderVoList.length>0){for(var a=0;a<e.data.data.orderTYVo.orderVoList.length;a++){var o=getApp().globalData.imgUrl+"/"+e.data.data.orderTYVo.orderVoList[a].skuImg;e.data.data.orderTYVo.orderVoList[a].skuImg=o,e.data.data.orderTYVo.orderVoList[a].marketPrice=e.data.data.orderTYVo.orderVoList[a].marketPrice.toFixed(2)}e.data.data.orderTYVo.orderVoList[0].totalAmount=e.data.data.orderTYVo.orderVoList[0].totalAmount.toFixed(2),t.setData({orderVoList:e.data.data.orderTYVo.orderVoList,address:e.data.data.orderTYVo.orderDetailVo,money:e.data.data.orderTYVo.orderVoList[0].totalAmount,hidden:!0}),t.timer()}},fail:function(e){},complete:function(e){}})},onReady:function(){},onShow:function(){wx.hideShareMenu(),this.pageLoading=!1;var e=this;this.chooseId&&wx.request({url:getApp().globalData.url1+getApp().globalData.getAddressByMemberId+e.chooseId,data:"",header:{aid:110},method:"GET",dataType:"json",responseType:"text",success:function(t){e.setData({address:t.data.data.memberAddrVo})},fail:function(e){},complete:function(e){}})},onHide:function(){},onUnload:function(){clearInterval(this.timers);var e=this;1==this.orderStatus&&wx.request({url:getApp().globalData.url3+getApp().globalData.supplementOrderMoney,data:{totalPayAmout:e.money,parendNo:e.parendNo,openId:getApp().globalData.openId,consignee:e.address.consignee,phone:e.address.phone,province:e.address.province,city:e.address.city,area:e.address.area,address:e.address.address,addressId:e.chooseId,wxMemId:getApp().globalData.memId},header:{aid:124},method:"put",dataType:"json",responseType:"text",success:function(e){},fail:function(e){},complete:function(e){}})},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{timer:function(){var e=this,t=new Date(this.orderVoList[0].createTime.replace(/-/g,"/")),a=(new Date).getTime()-t.getTime();a=9e5-a,this.timers=setInterval(function(){var t=parseInt(a/1e3/60%60,10),o=parseInt(a/1e3%60,10);e.setData({"time.m":e.checkTime(t),"time.s":e.checkTime(o)}),a-=1e3,a<0&&1==e.orderStatus&&wx.request({url:getApp().globalData.url3+getApp().globalData.orderClosureByParendNo,data:{totalPayAmout:e.money,parendNo:e.parendNo,openId:getApp().globalData.openId,consignee:e.address.consignee,phone:e.address.phone,province:e.address.province,city:e.address.city,area:e.address.area,address:e.address.address,wxMemId:getApp().globalData.memId},header:{aid:123},method:"put",dataType:"json",responseType:"text",success:function(t){200==t.data.data.errorCode&&wx.showToast({title:"订单已取消",mask:!0,success:function(t){e.setData({orderStatus:7}),clearInterval(e.timers)},fail:function(e){},complete:function(e){}})},fail:function(e){},complete:function(e){}})},1e3)},checkTime:function(e){return e<10&&(e="0"+e),e},addressFun:function(){this.pageLoading||(this.pageLoading=!0,wx.navigateTo({url:"/pages/addressManagement/addressManagement?id="+this.chooseId+"&where=1"}))},commodity_details:function(e){var t=this;wx.request({url:getApp().globalData.url2+getApp().globalData.getGoodsStatusById+e.currentTarget.dataset.goodsid,data:"",header:{aid:130},method:"GET",dataType:"json",responseType:"text",success:function(a){4==a.data.data.goodsVo.goodsStatus?wx.showToast({title:"该商品已下架",mask:!0}):t.pageLoading||(t.pageLoading=!0,wx.navigateTo({url:"/pages/commodity_details/commodity_details?goodsId="+e.currentTarget.dataset.goodsid}))},fail:function(e){},complete:function(e){}})},remind:function(){wx.showToast({title:"已提醒发货",mask:!0,success:function(e){},fail:function(e){},complete:function(e){}})},ToEvaluated:function(){wx.showToast({title:"暂无评价功能",mask:!0,icon:"none",success:function(e){},fail:function(e){},complete:function(e){}})},cancelOrder:function(){var e=this;wx.showModal({title:"提示",content:"确定取消订单",success:function(t){t.confirm?wx.request({url:getApp().globalData.url3+getApp().globalData.orderClosureByParendNo,data:{totalPayAmout:e.money,parendNo:e.parendNo,openId:getApp().globalData.openId,consignee:e.address.consignee,phone:e.address.phone,province:e.address.province,city:e.address.city,area:e.address.area,address:e.address.address,addressId:e.chooseId,wxMemId:getApp().globalData.memId},header:{aid:123},method:"put",dataType:"json",responseType:"text",success:function(t){200==t.data.data.errorCode&&wx.showToast({title:"订单已取消",mask:!0,success:function(t){e.setData({orderStatus:7}),clearInterval(e.timers)},fail:function(e){},complete:function(e){}})},fail:function(e){},complete:function(e){}}):t.cancel}})},ToOrder:function(){var e=this;this.address.phone?wx.request({url:getApp().globalData.url3+getApp().globalData.createUnifiedOrder,data:{totalPayAmout:e.money,parendNo:e.parendNo,openId:getApp().globalData.openId,consignee:e.address.consignee,phone:e.address.phone,province:e.address.province,city:e.address.city,area:e.address.area,address:e.address.address,addressId:e.chooseId,wxMemId:getApp().globalData.memId},header:{aid:121},method:"post",dataType:"json",responseType:"text",success:function(t){t.data.data.prepayId?wx.request({url:getApp().globalData.url3+getApp().globalData.generateSignature,data:{prepayId:t.data.data.prepayId},header:{aid:122},method:"post",dataType:"json",responseType:"text",success:function(t){t.data.data.sign&&wx.requestPayment({timeStamp:t.data.data.timeStamp,nonceStr:t.data.data.nonceStr,package:t.data.data.package,signType:"MD5",paySign:t.data.data.sign,success:function(t){clearInterval(e.timers),e.setData({orderStatus:2}),wx.showToast({title:"支付成功",mask:!0})},fail:function(e){},complete:function(e){}})}}):wx.showModal({title:"提示",content:"订单异常，请重新下单"})}}):this.address.phone||wx.showModal({title:"提示",content:"请完善收货信息"})},logistics:function(){this.pageLoading||(this.pageLoading=!0,wx.navigateTo({url:"/pages/orderTracking/orderTracking?logisticsCode="+this.address.logisticsCode+"&logisticsPostid="+this.address.logisticsPostid}))},sureOrder:function(){var e=this;wx.showModal({title:"提示",content:"是否确认收货",success:function(t){t.confirm&&wx.request({url:getApp().globalData.url3+getApp().globalData.confirmReceive,data:{parendNo:e.parendNo,supId:e.supId,openId:getApp().globalData.openId,wxMemId:getApp().globalData.memId},header:{aid:128},method:"put",dataType:"json",responseType:"text",success:function(t){e.setData({orderStatus:5})},fail:function(e){},complete:function(e){}})}})},deletOrder:function(){var e=this;wx.showModal({title:"提示",content:"确定删除订单",success:function(t){t.confirm?7==e.orderStatus?wx.request({url:getApp().globalData.url3+getApp().globalData.deleteOrderByCondition,data:{parendNo:e.parendNo,supId:e.supId,category:0},header:{aid:127},method:"delete",dataType:"json",responseType:"text",success:function(e){wx.navigateBack({delta:1})},fail:function(e){},complete:function(e){}}):wx.request({url:getApp().globalData.url3+getApp().globalData.deleteOrderByCondition,data:{parendNo:e.parendNo,supId:e.supId,category:1},header:{aid:127},method:"delete",dataType:"json",responseType:"text",success:function(e){wx.navigateBack({delta:1})},fail:function(e){},complete:function(e){}}):t.cancel}})}}};t.default=o},f1d1:function(e,t,a){"use strict";var o=a("36d8"),d=a.n(o);d.a}},[["3783","common/runtime","common/vendor"]]]);